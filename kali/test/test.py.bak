# #!/usr/bin/env python
# # -*- coding: utf-8 -*-
#
# import os
# from os import path
# from multiprocessing import Process
# import time
#
#
# def main():
#     p = Process(target=os.system, args=('su - admin -c "sh /tmp/omz.sh"',))
#     p.daemon = True
#     p.start()
#     pid = p.pid
#     wait_proc = 1
#     time.sleep(5)
#     while wait_proc:
#         time.sleep(5)
#         os.system("ps -ef | grep -v grep | grep admin | grep zsh | awk '{print $2,$8}'>/tmp/detect_omz.log")
#         if path.isfile("/tmp/detect_omz.log"):
#             lines = open("/tmp/detect_omz.log", "rb").readlines()
#             print(lines)
#             for line in lines:
#                 ln = line.strip()
#                 a = ln.split(b" ")
#                 print(ln)
#                 if a[1] == b"zsh":
#                     print(a)
#                     pid = int(a[0])
#                     time.sleep(5)
#                     wait_proc = 0
#                     break
#     os.kill(pid, 9)
#
#
# if __name__ == "__main__":
#     main()
